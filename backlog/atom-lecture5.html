<!DOCTYPE html>
<!--
	Web 2.0, CTU course slides
	(cc) 2010-2013 Tomas Vitvar, tomas@vitvar.com
-->
<html>   
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> 
        <meta name="course"   content="Web 2.0"/>
		<meta name="lecture"  content="Lecture 5"/>
   		<meta name="keywords" content="atom, atompub procotol, atom feed, atom entry"/>
           
        <link type="text/css" rel="stylesheet" href="css/meta.css"></link>   
        <link type="text/css" rel="stylesheet" href="css/ctu-fit.css"></link>   
        <link type="text/css" rel="stylesheet" href="humla/lib/core/humla.css"></link>   

        <script type="text/javascript" src="humla/lib/humla.js"></script>
        <title>Advanced Resource Representation</title>
	</head>
	<body> 
    
		<footer>
			<p><b>#META_LECTURE#: #TITLE#</b>,&nbsp;<span class="meta_semester"/>,&nbsp;
			<span class="meta_twitter"/></p>
			<p><b>&#8210; #SLIDE_NO# &#8210;</b></p>
		</footer>

    	<div class="slide intro">
			<hgroup>
				<h1><span class="meta_course"/></h1>
 				<h2>#META_LECTURE#: #TITLE#</h2>
			</hgroup>
			<div class="author">
				<p class="meta_author"/>
				<p><span class="meta_email"/> &bull; <span class="meta_twitter"/> &bull; 
				<span class="meta_web"/></p>
			</div>
			<center><div class="meta_logo"></div></center>
			<div class="org">
				<p class="meta_org"/>
				<p><span class="meta_orgfac"/> &bull; <span class="meta_field"/> 
				&bull; <span class="meta_orgweb"/></p>
			</div>
			<div class="etc">
        		<div class="text-info">
    				Modified: #LAST_MODIFIED#<br/>
					Humla v#HUMLA_VERSION#
				</div>
				<a href="http://creativecommons.org/licenses/by-sa/3.0/"><div class="license"></div></a>
				<div class="oppa"></div>
			</div>
		</div>		
		
		<div class="slide outline"></div>
		
		<section>
			<header>Overview of Formats and Protocols</header>

			<div class="slide">
				<hgroup>
					<h1>Data on the Web</h1>
				</hgroup>
				<div class="h-drawing" style="height: 450px" 
					id="161LY9K1fWd-G3iNpulEEEXq1yoxvjsQxombdyV4Yyfc"></div>
			</div>

			<div class="slide">
				<hgroup>
					<h1>Data Syntax, Structure and Semantics</h1>
				</hgroup>
				<div class="h-drawing" style="height: 430px" 
					id="1sm2ZB4YcB2FHzj5uD0xBLeIDZjmz14NzjyGeSgmBl0U"></div>
			</div>
		</section>
		
		<div class="slide">
			<hgroup>
				<h1>Atom Standard</h1>
			</hgroup>
			<ul class="spacing-20">
				<li>A need for a standard syndication format</li>
				<ul class="x-small">
					<li>machine-processable Web site content</li>
					<li>Alternative to RSS</li>
					<ul>
						<li>RSS spec does not say how to encode content, strings only ASCII-encoded, 
					not clearly defined meaning of RSS elements, etc.</li>
					</ul>
				</ul>
				<li>IETF Atom Publishing Format and Protocol WG</li>
				<ul>
					<li>RFC 4287: <span id="rfc-4287" class="h-ref"></span></li>
					<li>RFC 5023: <span id="rfc-5023" class="h-ref"></span></li>
				</ul>
				<li>Adoption</li>
				<ul>
					<li>Google: Google Data Protocol (GData)</li>
					<li>Microsoft: Open Data Protocol (OData)</li>
				</ul>
			</ul>
		</div>
	
		<div class="slide outline"></div>
				
		<section>
			<header>Atom Syndication Format</header>

			<div class="slide">
				<hgroup>
					<h1>Atom Syndication Format</h1>
				</hgroup>
				<div style="height: 290px" id="1zk9j2KMGel79M1x94pFz8We0aPuKl9X9p9sJehFA-M8" 
					class="h-drawing"></div>
				<ul>
					<li>Two types of atom documents</li>
					<ul class="x-small">
						<li>Atom Feed Document</li>
						<ul>
							<li>represents an atom feed, its metadata and some or all entries associated with it.</li>
						</ul>
						<li>Atom Entry Document</li>
						<ul>
							<li>represents exactly one entry, outside of context of atom feed</li>
						</ul>
					</ul>
				</ul>
			</div>
			
			<div class="slide">
				<hgroup>
					<h1>Atom Syndication Format</h1>
				</hgroup>
				<ul>
					<li>Atom Feed Document Example</li>
				</ul>
				<pre class="brush: xml; class-name: 'tight'" style="zoom: 0.6">
				&lt;?xml version="1.0" encoding="utf-8"?>
				&lt;feed xmlns="http://www.w3.org/2005/Atom">

				   &lt;title>Example Feed&lt;/title>
				   &lt;link href="http://example.org/"/>
				   &lt;updated>2003-12-13T18:30:02Z&lt;/updated>
				   &lt;author>
				      &lt;name>John Doe&lt;/name>
				    &lt;/author>
				    &lt;id>urn:uuid:60a76c80-d399-11d9-b93C-0003939e0af6&lt;/id>
				    
				    &lt;entry>
				    	&lt;title>Example feed title&lt;/title>
				    	&lt;link href="http://example.org/2003/12/13/atom03"/>
				    	&lt;id>urn:uuid:1225c695-cfb8-4ebb-aaaa-80da344efa6a&lt;/id>
				    	&lt;updated>2003-12-13T18:30:02Z&lt;/updated>
				    	&lt;summary>Some text&lt;/summary>
				    &lt;/entry>
				&lt;/feed></pre>
				
			</div>
			
			<div class="slide">
				<hgroup>
					<h1>Atom Elements &ndash; Atom Feed</h1>
				</hgroup>
				<ul class="xx-small">
					<li>Specification</li>
					<ul class="small">
						<li>defined as XML information set, serialized as XML 1.0</li>
						<li>must be well-formed, no DTD/Schema &rarr; no requirements to be valid.</li>
					</ul>
					<li><code>atom:feed</code> element</li>
					<ul class="no-bullet">
						<li><code>(*)</code>: zero or more occurencies &ndash; repeating fields</li>
						<li><code>(?)</code>: zero or one occurence &ndash; non-repeating fields</li>
						<li><code>( )</code>: exactly one occurence &ndash; non-repeating fields</li>
					</ul>	
					<pre class="brush: bash; class-name: 'tight' ">
				atomFeed =
      				   element atom:feed {
         			      atomCommonAttributes,
         			         (atomAuthor*
          			         & atomCategory*
          			         & atomContributor*
          			         & atomGenerator?
          			         & atomIcon?
          			         & atomId
          			         & atomLink*
          			         & atomLogo?
          			         & atomRights?
          			         & atomSubtitle?
          			         & atomTitle
          			         & atomUpdated
          			         & extensionElement*),
         			      atomEntry*
      				   }</pre>
				</ul>
			</div>

			<div class="slide">
				<hgroup>
					<h1>Atom Elements &ndash; Atom Entry</h1>
				</hgroup>
				<ul class="small">
					<li><code>atom:entry</code> element</li>
					<ul class="no-bullet">
						<li><code>(*)</code>: zero or more occurencies &ndash; repeating fields</li>
						<li><code>(?)</code>: zero or one occurence &ndash; non-repeating fields</li>
						<li><code>( )</code>: exactly one occurence &ndash; non-repeating fields</li>
					</ul>	
					<pre class="brush: bash; class-name: 'tight' ">
				atomEntry =
      				   element atom:entry {
         			      atomCommonAttributes,
         			        (atomAuthor*
          			        & atomCategory*
							& atomContent?
							& atomContributor*
							& atomId
          					& atomLink*
          					& atomPublished?
          					& atomRights?
          					& atomSource?
          					& atomSummary?
          					& atomTitle
          					& atomUpdated
          					& extensionElement*)
      				}</pre>					
				</ul>
			</div>

			<div class="slide">
				<hgroup>
					<h1>Pointers to other information</h1>
				</hgroup>
				<ul class="x-spacing">
					<li>URI identifier</li>
					<ul>
						<li>unique identification of things</li>
						<li>feed/entry <code>id</code></li>
						<li><code>author</code> and <br/><code>contributor</code> (person uri)</li>
						<li><code>generator</code> (uri)</li>
						<li><code>category</code> schema (uri), term (uri)<br/>
						example:<br/>
						<pre class="brush: xml; class-name: 'tight' ">
							&lt;category scheme="http://example.org/dogs"
							&nbsp;&nbsp;term="http://example.org/dogs#basset"
							&nbsp;&nbsp;label="Basset"/></pre>	
						</li>
					</ul>
					<div style="height: 200px; margin-left: 190px; margin-top: -360px; 
					padding-bottom: 140px" id="1ipVoIozMTXFeRaTfwTf9_QQajA_drinXdy5JZcXLDtk" class="h-drawing"></div>
					
					<li>Unambiguous identification of things using URIs</li>
					<ul class="x-small">
						<li>Helps interoperability, can take advantage of wikipedia concepts</li>
						<ul>
							<li>still not very common, will improve with linked data</li>
						</ul>
					</ul>
				</ul>
			</div>

			<div class="slide">
				<hgroup>
					<h1>Atom Links</h1>
				</hgroup>
				<ul class="x-spacing">
					<li>Links to other Atom documents</li>
					<ul>
						<li>Atom defines simple link structure</li>
						<li><code>type</code> defines content type</li>
						<li><code>rel</code> defines relation to this resource</li>
						<ul>
							<li>self, alternate, related, enclosure, via</li>
							<li>standardized by IANA</li>
						</ul>
					</ul>
					<li>Adoption by RESTful services</li>
					<ul>
						<li>Core for HATEOAS</li>
						<li>Adopted in Link header, see <span id="rfc-5988" class="h-ref"></span></li>
						<li>More details in 
							<a href="lecture4.html#!/11/v1">Lecture 4 &ndash; HATEOAS</a>.</li>
					</ul>
				</ul>
			</div>

			<div class="slide">
				<hgroup>
					<h1>Encoding Textual Content</h1>
				</hgroup>
				<ul class="small">
					<li>Plain text</li>
					<ul class="small">
						<pre class="brush: xml; class-name: 'tight' ">
						    &lt;title type="text">
						       Less: &amplt;
						    &lt;/text></pre>
   						<li>simple text, must not contain child elements</li>
					</ul>
					<li>HTML</li>
					<ul class="small">
						<pre class="brush: xml; class-name: 'tight' ">
						    &lt;title type="html">
						       Less: &amplt;em> &ampamp;lt; &amplt;/em>
						    &lt;/text></pre>
   						<li>html text, must not contain child elements</li>
   						<li>any markup must be escaped,</li>
   						<li>should be possible to display it as HTML inside <code>&lt;div></code> element</li>
					</ul>
					<li>XHTML</li>
					<ul class="small">
						<pre class="brush: xml; class-name: 'tight' ">
						    &lt;title type="xhtml" xmlns:x="http://www.w3.org/1999/xhtml">
						       &lt;x:div>Less: &lt;x:em> &ampamp;lt; &lt;/x:em>&lt;/x:div>
						    &lt;/text></pre>
   						<li>the value is a single xhtml <code>&lt;div></code> element, 
   						not part of the content</li>
 					</ul>
				</ul>	
			</div>

			<div class="slide">
				<hgroup>
					<h1>Aggregation</h1>
				</hgroup>
				<div style="height: 300px" id="1mH5Q9FLc7p0NKBC-OxiVq5SzlUqwiS4tYxCNQ0fGtxA" 
					class="h-drawing"></div>
				<ul style="margin-top: 30px">
					<ul class="small">
						<li>Atom feed may include entries from another atom feed</li>
						<ul>
							<li>these entries do not originally belong to this feed</li>
						</ul>
						<li><code>source</code> element should contain at least:</li>
						<ul> 
							<li>required atom feed's metadata
								<code>id</code>, <code>title</code> and <code>updated</code></li>
						</ul>
						<li>retains information about an entry's source feed</li>
					</ul>
				</ul>	
			</div>

			<div class="slide">
				<hgroup>
					<h1>Data and Time</h1>
				</hgroup>
				<ul>
					<li>Notion of time</li>
					<ul>
						<li>Atom document is a snapshot of resource in some time</li>
						<li><code>updated</code> (feed, entry) &ndash; last update of the resource</li>
						<li><code>published</code> (entry) &ndash; initial creation of the first availability of the resource</li>
					</ul>
					<li>Data format</li>
					<ul>
					<li>Examples:<br/>
					<pre class="brush: xml; class-name: 'tight'">
					    &lt;updated>2003-12-13&lt;/updated>
					    &lt;updated>2003-12-13T18:30:02.25Z&lt;/updated>
					    &lt;updated>2003-12-13T18:30:02.25+01:00&lt;/updated></pre>
   					<code>T</code> &ndash; time delimiter<br/>
   					<code>Z</code> &ndash; identifies UTC time (~GMT)<br/>
   					<code>(+|-)hh:mm</code> &ndash; defines local time and a shift in hours 
						and minutes from the UTC time</li>
				</ul>	
			</div>

			<div class="slide">
				<hgroup>
					<h1>Polling</h1>
				</hgroup>
				<div style="height: 390px" 
					id="15d4SxbbGYqPVyZXn01QeoODggGiHIfR9y8bowuHcdHY" class="h-drawing"></div>
				<ul style="margin-top: 20px"><ul class="small">
					<li><code>updated</code> is the last updated time of the resource at the server</li>
					<li>resource refresh interval is pre-defined by the serice</li>
				</ul></ul>
			</div>
			
			<div class="slide">
				<hgroup>
					<h1>Extensions</h1>
				</hgroup>
				<ul class="x-small">
					<li>Possible to combine various vocabularies</li>
					<ul>
						<li>through namespaces <code>xmlns</code> attribute, extensions of <code>link.rel</code> attribute</li>
					</ul>
					<li>Example: GData (PicasaWeb, Docs, ...)</li>
					<ul class="xx-small">
						<li>combines vocabularies such as Geo location</li>
					<pre class="brush: xml; class-name: 'tight'; highlight: [3,4,16,17,18,19,20,21]">
					&lt;?xml version='1.0' encoding='UTF-8'?&gt;
					&lt;feed xmlns='http://www.w3.org/2005/Atom' xmlns:gml='http://www.opengis.net/gml' 
					   xmlns:gphoto='http://schemas.google.com/photos/2007'
					   xmlns:georss='http://www.georss.org/georss'&gt;
					      &lt;id&gt;http://picasaweb.google.com/.../albumid/5262593967320034641&lt;/id&gt;
					      &lt;updated&gt;2010-02-25T20:47:53.295Z&lt;/updated&gt;
					      &lt;category 
					         scheme='http://schemas.google.com/g/2005#kind' 
					         term='http://schemas.google.com/photos/2007#album' /&gt;
					      &lt;title type='text'&gt;Památkově chráněný dům v Loukově&lt;/title&gt;
					      &lt;link rel='http://schemas.google.com/g/2005#feed' type='application/atom+xml'
					        href='http://picasaweb.google.com/.../albumid/5262593967320034641?hl=en_US' /&gt;
					      &lt;link rel='http://schemas.google.com/photos/2007#slideshow' 
					        type='application/x-shockwave-flash'
					        href='https://picasaweb.google.com/s/c/bin/slideshow.swf?...' /&gt;
					      &lt;georss:where&gt;
					         &lt;gml:Point&gt;
					           &lt;gml:pos&gt;50.5576865 15.0356436&lt;/gml:pos&gt;
					        &lt;/gml:Point&gt;
					      &lt;/georss:where&gt;
					      &lt;gphoto:allowPrints&gt;true&lt;/gphoto:allowPrints&gt;
					      ...
					&lt;/feed&gt;</pre>
					</ul>
				</ul>
			</div>
		</section>
			
		<div class="slide outline"></div>
		
		<section>
			<header>Extensions</header>

			<div class="slide">
				<hgroup>
					<h1>Extensions</h1>
				</hgroup>
				<ul class="x-spacing">
					<li>OpenSearch</li>
					<ul>
						<li>Specification: <span id="open-search" class="h-ref"></span></li>
						<li>Search service description and search results</li>
					</ul>
					<li>Google Data Protocol</li>
					<ul>
						<li>Filtering, partial response and partial update</li>
						<li>Entity tag attribute for <code>&lt;feed></code>
							and <code>&lt;entry></code> elements</li>
						<li>HTTP methods overriding</li></li>
					</ul>
				</ul>
			</div>

			<div class="slide">
				<hgroup>
					<h1>OpenSearch</h1>
				</hgroup>
				<ul class="small">
					<li>Open Search Specification</li>
					<ul>
						<li><b>Open Search Description Document (OSDD)</b></li>
						<ul>
							<li>description of a search service</li>
						</ul>
						<li><b>OpenSearch Response Document</b></li>
						<ul>
							<li>Standard description of search results by search services</li>
							<li>extension of syndication formats, RSS and Atom</li>
						</ul>
					</ul>
					<li>Adoption</li>
					<ul>
						<li>Browsers such as IE, Google Chrome &ndash;
							search engines you can use to search various sites.</li>
						<li>APIs such as Bing API, Google Docs, etc. &ndash; description of search results.</li>
					</ul>
				</ul>
			</div>

			<div class="slide">
				<hgroup>
					<h1>OpenSearch Description Document</h1>
				</hgroup>
				<ul class="x-small">
					<li>Example:</li>
				<pre class="brush: xml; class-name: 'tight'">
				 &lt;?xml version="1.0" encoding="UTF-8"?>
				 &lt;OpenSearchDescription xmlns="http://a9.com/-/spec/opensearch/1.1/">
				   &lt;ShortName>Web Search&lt;/ShortName>
				   &lt;Description>Use Example.com to search the Web.&lt;/Description>
				   &lt;Tags>example web&lt;/Tags>
				   &lt;Contact>admin@example.com&lt;/Contact>
				   &lt;Url type="application/atom+xml"
						template="http://example.com/?q={searchTerms}&amp;pw={startPage?}&amp;format=atom"/>
				   &lt;Url type="application/rss+xml"
						template="http://example.com/?q={searchTerms}&amp;pw={startPage?}&amp;format=rss"/>
				   &lt;Url type="text/html"
						template="http://example.com/?q={searchTerms}&amp;pw={startPage?}"/>
				   &lt;Image height="64" width="64" type="image/png">
						http://example.com/websearch.png
				   &lt;/Image>
				   &lt;Query role="example" searchTerms="cat" />
				   &lt;Developer>Example.com Development Team&lt;/Developer>
				   &lt;AdultContent>false&lt;/AdultContent>
				   &lt;Language>en-us&lt;/Language>
				   &lt;OutputEncoding>UTF-8&lt;/OutputEncoding>
				   &lt;InputEncoding>UTF-8&lt;/InputEncoding>
				 &lt;/OpenSearchDescription></pre>
				<ul style="margin-top: 25px"><li><code>searchTerms</code> is a free text</li></ul>
				</ul>
			</div>

			<div class="slide">
				<hgroup>
					<h1>OpenSearch Response Document</h1>
				</hgroup>
				<ul class="x-small">
					<li>Example:</li>
					<ul>
						<li>Result in Atom format of a search query</li>
					</ul>
				<pre class="brush: xml; class-name: 'tight'; highlight: [10,11,12,13,15,16]">
					&lt;?xml version="1.0" encoding="UTF-8"?>
					&lt;feed xmlns="http://www.w3.org/2005/Atom"
						   xmlns:opensearch="http://a9.com/-/spec/opensearch/1.1/">
					   &lt;title>Example.com Search: New York history</title>
					   &lt;updated>2003-12-13T18:30:02Z&lt;/updated>
					   &lt;author>
						 &lt;name>Example.com, Inc.&lt;/name>
					   &lt;/author>
					   &lt;id>urn:uuid:60a76c80-d399-11d9-b93C-0003939e0af6&lt;/id>
					   &lt;opensearch:totalResults>4230000&lt;/opensearch:totalResults>
					   &lt;opensearch:startIndex>21&lt;/opensearch:startIndex>
					   &lt;opensearch:itemsPerPage>10&lt;/opensearch:itemsPerPage>
					   &lt;opensearch:Query role="request" searchTerms="New York History" />
						...
					   &lt;link rel="search" type="application/opensearchdescription+xml"
							href="http://example.com/opensearchdescription.xml"/>
					   &lt;entry>
						 &lt;title>New York History&lt;/title>
						 ...
					   &lt;/entry>
					 &lt;/feed>
					</pre>
				</ul>
			</div>

		</section>
			
	</body>
</html>	
