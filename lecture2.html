<!DOCTYPE html>
<!--
    Middleware and Web Services, CTU course slides
    (cc) 2010-2013 Tomas Vitvar, http://vitvar.com
    written for Humla, an open source HTML5 presentation environment
-->
<html>  
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> 
        <meta name="course"   content="Middleware and Web Services"/>
        <meta name="lecture"  content="Lecture 2"/>
        <meta name="keywords" content="REST, resource identification, resource representation"/>
           
        <link type="text/css" rel="stylesheet" href="css/meta.css"></link>   
        <link type="text/css" rel="stylesheet" href="css/ctu-fit.css"></link>   
        <link type="text/css" rel="stylesheet" href="humla/lib/core/humla.css"></link>   

        <script type="text/javascript" src="humla/lib/humla.js"></script>
        <title>REST Architecture 1</title>
    </head>
    
    <body>
        <footer>
            <p><b>#META_LECTURE#: #TITLE#</b>,&nbsp;<span class="meta_semester"/>,&nbsp;
            <span class="meta_twitter"/></p>
            <p><b>&#8210; #SLIDE_NO# &#8210;</b></p>
        </footer>

        <div class="slide intro">
            <hgroup>
                <h1><span class="meta_course"/></h1>
                <h2>#META_LECTURE#: #TITLE#</h2>
            </hgroup>
            <div class="author">
                <p class="meta_author"/>
                <p><span class="meta_email"/> &bull; <span class="meta_twitter"/> &bull; 
                <span class="meta_web"/></p>
            </div>
            <center><div class="meta_logo"></div></center>
            <div class="org">
                <p class="meta_org"/>
                <p><span class="meta_orgfac"/> &bull; <span class="meta_field"/> 
                &bull; <span class="meta_orgweb"/></p>
            </div>
            <div class="etc">
                <div class="text-info">
                    Modified: #LAST_MODIFIED#<br/>
                    Humla v#HUMLA_VERSION#
                </div>
                <a href="http://creativecommons.org/licenses/by-sa/3.0/"><div class="license"></div></a>
                <div class="oppa"></div>
            </div>
        </div>
        
        <div class="slide outline"></div>
        
        <section>
            <header>Overview of Formats and Protocols</header>

            <div class="slide">
                <hgroup>
                    <h1>Data on the Web</h1>
                </hgroup>
                <div class="h-drawing" style="height: 450px" 
                    id="161LY9K1fWd-G3iNpulEEEXq1yoxvjsQxombdyV4Yyfc"></div>
            </div>

            <div class="slide">
                <hgroup>
                    <h1>Data Syntax, Structure and Semantics</h1>
                </hgroup>
                <div class="h-drawing" style="height: 430px" 
                    id="1sm2ZB4YcB2FHzj5uD0xBLeIDZjmz14NzjyGeSgmBl0U"></div>
            </div>
        </section>

        <div class="slide outline"></div>
        
        <section>
            <header>Introduction to REST</header>
            
    		<div class="slide">
    			<hgroup>
    				<h1>REST</h1>
    			</hgroup>
    			<ul class="small spacing">
                    <li>REST</li>
                    <ul>
                        <li>Representational State Transfer</li>
                    </ul>
    				<li>Architecture Style</li>
    				<ul>
    					<li>Roy Fielding &ndash; co-author of HTTP</li>
    					<li>He coined REST in his <span class="h-ref" id="rest">PhD thesis</span>.</li>
                        <ul>
                            <li>The thesis abstracts from HTTP technical details</li>
                            <li>HTTP is one of the REST implementation &rarr; <b>RESTful</b></li>
                            <li>REST is a leading programming model for Web APIs</li>
                        </ul>
    				</ul>
    				<li>REST (RESTful) proper design</li>
    				<ul>
    					<li>people break principles often</li>
    					<li>See <span class="h-ref" id="rest-anti">REST Anti-Patterns</span> for some details.<br/>
    				</ul>
    				<li>REST and Web Service Architecture</li>
    				<ul>
    					<li>REST is a realization of WSA resource-oriented model</li>
    				</ul>
    			</ul>			
    		</div>
            
            <div class="slide">
                <hgroup>
                    <h1>REST and Web Architecture</h1>
                </hgroup>
        		<ul class="small">
					<li>Tim-Berners Lee</li>
					<ul>
						<li>"creator", father of the Web</li>
					</ul>
					<li>Key Principles</li>
					<ul>
						<li>Separation of Concerns</li>
                        <ul>
						    <li>enables independent innovation</li>
                        </ul>
						<li>Standards-based</li>
                        <ul>
						    <li>common agreement, big spread and adoption</li>
                        </ul>
						<li>Royalty-free technology</li>
                        <ul>
						    <li>a lot of open source, no fees</li>
                        </ul> 
					</ul>
					<li>Architectural Basis</li>
					<ul>
						<li><b>Identification:</b> universal linking of resources using URI</li>
						<li><b>Interaction:</b> protocols to retrieve resources &ndash; HTTP</li>
						<li><b>Formats:</b> resource representation (data and metadata)</li>				
					</ul>
				</ul>                
            </div>      

            <div class="slide">
    			<hgroup>
    				<h1>HTTP Advantages</h1>
    			</hgroup>
    			<ul class="small spacing">
					<li>Familiarity</li>
					<ul>
						<li>HTTP protocol is well-known and widely used</li>
					</ul>
					<li>Interoperability</li>
					<ul>
						<li>All environments have HTTP client libraries</li>
                        <ul>
						    <li>technical interoperability is thus no problem</li>
                            <li>no need to deal with vendor-specific interoperability issues</li>
                        </ul>
						<li>You can focus on the core of the integration problem</li>
                        <ul>
						    <li>application (domain, content) interoperability</li>
                        </ul>
					</ul>
					<li>Scalability</li>
					<ul>
						<li>you can use highly scalable Web infrastructure</li>
						<ul>
                            <li>caching servers, proxy servers, etc.</li>
                        </ul>
						<li>HTTP features such as HTTP GET idempotence and safe 
                            allow you to use caching</li>
					</ul>
				</ul>
    		</div>
            
            <div class="slide">
        		<hgroup>
    				<h1>REST Core Principles</h1>
    			</hgroup>
                <ul class="small">
                    <li>REST architectural style defines constraints</li>
                    <ul>
                        <li>if you follow them, they help you to achieve a good design, 
                        interoperability and scalability.</li>
                    </ul>
                    <li>Constraints</li>
                    <ul>
                        <li>Client/Server</li>
                        <li>Statelessness</li>
                        <li>Cacheability</li>
                        <li>Layered system</li>
                        <li>Uniform interface</li>
                    </ul>
                    <li>Guiding principles</li>                        
                    <ul>    
                        <li>Identification of resources</li>
                        <li>Representations of resources and self-descriptive messages</li>
                        <li>Hypermedia as the engine of application state (HATEOAS)</li> 
                    </ul>
                </ul>
    		</div>

            <div class="slide">
    			<hgroup>
					<h1>Resource</h1>
				</hgroup>
                <ul class="x-small">
                    <li>A resource can be anything such as</li>
                    <ul>
                        <li>A real object: car, dog, Web page, printed document</li>
                        <li>An abstract thing such as address, name, etc. &rarr; RDF</li>
                    </ul>
                    <li>A resource in REST</li>
                    <ul>
                        <li>A resource corresponds to one or more entities of a data model</li>
                        <li>A representation of a resource can be conveyed in a message electronically (information resource)</li>
                        <li>A resource has an identifier and a representation and a client can apply an access to it</li>
                    </ul>
                </ul>
				<div class="h-drawing" style="height: 200px" 
                    id="1sSCJVFnKU0UgLek_FlFdQfKVeT9myKf-34IYyw5FQps"></div>
			</div>

        	<div class="slide">
    			<hgroup>
    				<h1>Access to a Resource</h1>
    			</hgroup>
    			<div class="h-drawing" style="height: 290px;" 
    				id="1hw7HbAaK09w3I1mtmsJZMb3_OsYpFlBrrJjJRGsz23g"></div>
                <ul class="x-small">
                    <li>Terminology</li>
                    <ul>
                        <li>Client = User Agent</li>
                        <li><b>Dereferencing URI</b> &ndash; a process of obtaining a protocol from the URI and creating a request.</li>
                        <li><b>Access</b> &ndash; a process of sending a request and obtaining a response as a result; 
                        access usually realized through HTTP.</li>
                    </ul>
                </ul>
    		</div>

        </section>

        <div class="slide outline"></div>
    
        <section>
            <header>Uniform Resource Identifier</header>
    
			<div class="slide">
				<hgroup>
                    <h1>URI, URL, URN</h1>
				</hgroup>
				<ul class="small spacing">
					<li>URI &ndash; Uniform Resource Identifier</li>
					<ul>
						<li>URI only identifies a resource</li>
                        <ul>
						    <li>it does not imply the resource physically exists</li>
                        </ul>
						<li>URI could be URL (locator) or URN (name)</li>
					</ul>
					<li>URL &ndash; Uniform Resource Locator</li>
					<ul>	
						<li>in addition allows to locate the resource</li>
                        <ul>
						    <li>that is &mdash; its network location</li>
                        </ul>
						<li>every URL is URI but an URI does not need to be URL</li>
					</ul>
					<li>URN &ndash; Uniform Resource Name</li>
					<ul>
						<li>refers to URI under "urn" scheme (<span class="h-ref" id="rfc-2141">RFC 2141</span>)</li>
						<li>require to be globally unique and persistent</li>
                        <ul>
						    <li>even if the resource cease to exist/becomes unavailable</li>
                        </ul>
					</ul>
				</ul>
			</div>
                            
			<div class="slide">
				<hgroup>
					<h1>URI</h1>
				</hgroup>
				<ul class="x-small">
                    <li>Definition</li>
                    <pre class="brush: plain; gutter: 'false'; class-name: 'tight'">
                        URI = scheme ":" [ "//" authority ] [ "/" path ] [ "?" query ] [ "#" frag ]
				    </pre>
					<li>Hierarchal sequence of components</li>
                    <ul>
						<li><code>scheme</code></li>
						<ul>
							<li>refers to a spec that assigns IDs within that scheme</li>
							<li>examples: <code>http</code>, <code>ftp</code>, <code>mailto</code>, <code>urn</code></li>
                            <li><code>scheme != protocol</code></li>
						</ul>
						<li><code>authority</code></li>
						<ul>
							<li>registered name (domain name) or server address</li>
							<li>optional port and user</li>
						</ul>
						<li><code>path and query</code></li>
						<ul>
							<li>identify resource within the scheme and authority scope</li>
							<li>path &ndash; hierarchal form</li>
							<li>query &ndash; non-hierarchal form (parameters key=value)</li>
						</ul>
						<li><code>fragment</code></li>
						<ul>
							<li>reference to a secondary resource within the primary resource</li>
						</ul>
                    </ul>
				</ul>
			</div>
            
            <div class="slide outline"></div>
            
            <section>
                <header>Resources and Application Data</header>
            
                <div class="slide">
    				<hgroup>
    					<h1>Resources over Entities</h1>
    				</hgroup>                
                    <ul class="x-small">
                        <li>Application's data model</li>
                        <ul>
                            <li>Entities and properties that the app uses for its data</li>
                        </ul>
                        <div class="h-drawing" style="height: 290px" id="1zT46lCNzfiaw9d5HfA6fzDZFAj2GQG8sRAg1QRWPPfQ"></div>
                        <li>URI identifies a resource within the app's data model</li>
                        <ul>
                            <li><code>path</code> &ndash; a "view" on the data model</li>
                            <ul>
                                <li>data model is a graph</li>
                                <li>URI identifies a resource using a path in a tree with some root</li>
                            </ul>
                        </ul>
                    </ul>
                </div>
    
                <div class="slide">
        			<hgroup>
    					<h1>Examples of Views</h1>
    				</hgroup>                
                    <ul class="x-small">
                        <li>View 1</li>
                        <ul>
                            <li>all customers: <code>/customers</code></li>
                            <li>a particular customer: <code>/customers/{customer-id}</code>
                            <li>All orders of a customer: <code>/customers/{customer-id}/orders</code>
                            <li>A particular order: <code>/customers/{customer-id}/orders/{order-id}</code>
                        </ul>
                        <li>View 2</li>
                        <ul>
                            <li>all orders: <code>/orders</code></li>
                            <li>All orders of a customer: <code>/orders/{customer-id}</code>
                            <li>A particular order: <code>/orders/{customer-id}/{order-id}</code>
                        </ul>
                        <li class="no-bullet">&rArr; Design issues</li>
                        <li>Good design practices</li>
                        <ul>
                            <li>No need for 1:1 relationship between resources and data entities</li> 
                            <ul>
                                <li>A resource may aggregate data from two or more entities</li>
                                <li>Thus only expose resources if it makes sense for the service</li>
                            </ul>
                            <li>Try to limit URI aliases, make it simple and clear</li>
                        </ul>
                        </ul>
                    </ul>
                </div>
    
                <div class="slide">
            		<hgroup>
    					<h1>Path vs. Query</h1>
    				</hgroup>                
                    <ul class="x-small">
                        <li>Path</li>
                        <ul>
                            <li>Hierarchical component, a view on the data</li>
                            <li>The main identification of the resource</li>
                        </ul>
                        <li>Query</li>
                        <ul>
                            <li>Can define selection, projection or other processing instructions</li>
                            <li>Selection</li>
                            <ul>
                                <li>filters entries of a resource by values of properties<br/>
                                <code>/customers/?status=valid</code></li>
                            </ul>
                            <li>Projection</li>
                            <ul>
                                <li>filters properties of resource entries<br/>
                                <code>/customers/?properties=id,name</code></li>
                            </ul>
                            <li>Processing instructions examples</li>
                            <ul>
                                <li>data format of the resource &rarr; cf. URI opacity<br/>
                                <code>/customers/?format=JSON</code></li>
                                <li>Access keys such as API keys<br/>
                                <code>/customers/?key=3ae56-56ef76-34540aeb</code></li>
                            </ul>
                        </ul>
                    </ul>
                </div>
    
    			<div class="slide">
    				<hgroup>
    					<h1>Fragment</h1>
    				</hgroup>
    				<ul class="small">
    					<li>Primary resource</li>
    					<ul>
                            <li>Defined by URI path and query</li>
    						<li>could be complex, composed resources</li>
    					</ul>
    					<li>Sub-resource/secondary resource</li>
    					<ul>
                            <li>Can be defined by a fragment</li>
    						<li>No explicit relationship between primary and sub-resource</li>
                            <ul>
                                <li>For example, we cannot infer that the two resources are in <code>part-of</code>, 
                                or <code>sub-class-of</code> relationships.</li>
                            </ul>
                            <li>Fragment semantics defined by a data format</li>
    					</ul>
                        <li>Usage of fragment</li>
                        <ul>
                            <li>identification of elements in HTML</li>
                            <li>URI references in RDF</li>
                            <li>State of an application in a browser</li>
                        </ul>
                    </ul>
                </div>
                
        		<div class="slide">
    				<hgroup>
    					<h1>Fragment Semantics</h1>
    				</hgroup>
    				<ul class="small">                
                        <li>Fragment semantics for HTML</li>
                        <ul>
                            <li>assume that <code>orders.html</code> are in <code>HTML</code> format.</li>
                        </ul>
                        <pre class="brush: plain">
                            http://company.com/tomas/orders.html#3456
                        </pre>
                        <ul>
                            <li class="no-bullet">&rArr; there is a HTML element with <code>id=3456</code></li>
                        </ul>
                        <li>But:</li>
                        <ul>
                            <li>Consider <code>orders</code> resource in <code>application/xml</code></li>
                        </ul>
                        <pre class="brush: xml">
                            &lt;orders>
                                &lt;order id="3456">...&lt;/order>
                                ...
                            &lt;/orders>
                        </pre>
                        <ul>
                            <li>Can't say that <code>http://company.com/tomas/orders.xml#3456</code> identifies 
                            an order element within the <code>orders</code> resource.</li>
                            <li><code>application/xml</code> content type does not define fragment semantics</li>
                        </ul>
    				</ul>
    			</div>
                
                <div class="slide">
                    <hgroup>
                        <h1>Resource ID vs. Resource URI</li>
                    </hgroup>
                    <ul class="small">
                        <li>Resource ID</li>
                        <ul>
                            <li>Local ID, part of an entity in a data model</li>
                            <li>Unique within an application where the resource belongs</li>
                            <li>Usually generated on a server (cf. <a href="lecture5.html#/PUT">PUT to update and insert</a>)</li>
                            <li>Exposed to the resource URI as a path element<br/>
                            <code>/orders/{order-id}</code></li>                            
                        </ul>
                        <li>Resource URI</li>
                        <ul>
                            <li>Global identifier, valid on the whole Web</li>
                            <li>Corresponds to the view on the data model of the app</li>
                            <li>Include multiple "higher" resources' IDs</li>
                            <li>Example:<br/>
                            <code>/customers/{customer-id}/orders/{order-id}/</code></li>   
                            <li>There can be more URIs identifying the same resource</li>
                        </ul>
                        
                    </ul>
                </div>

                <div class="slide">
                    <hgroup>
                        <h1>Major characteristics</li>
                    </hgroup>
                    <ul class="xx-small">
                        <li>Capability URL</li>
                        <ul>
                            <li>Short live URL generated for specific purpose</li>
                            <li>For example, user e-mail verification</li>
                        </ul>
                        <li>URI Alias</li>
                        <ul>
                            <li>Two URIs identifying the same resource</li>
                        </ul>
                        <li>URI Collision</li>
                        <ul>
                            <li>Two URIs identifying the same resource (misuse of URI authority)</li>
                        </ul>
                        <li>URI Opacity</li>
                        <ul>
                            <li>Content type encoded as part of URI</li>
                            <li><code>http://www.example.org/customers.xml</code>
                        </ul>
                        <li>Resource versions encoded in URI</li>
                        <ul>
                            <li>Two URIs identifying the same resource of different versions</li>
                            <li><code>http://www.example.org/v1/customers.xml</code>
                        </ul>
                        <li>Persistent URL</li>
                        <ul>
                            <li>URL is valid even for obsolete resource</li>
                            <li>For example, redirection should be in place</li>
                        </ul>
                    </ul>
                </div>
              
            </section>
    
        </section>

        <div class="slide outline"></div>

        <section>
            <header>Resource Representation</header>
            
            <section>
                <header>Representation, Data Format and Metadata</header>
                            
        		<div class="slide">
    				<hgroup>
    					<h1>Representation and Data Format</h1>
    				</hgroup>
                    <ul class="small">
                        <li>Representation</li>
                        <ul>
                            <li>Various languages, one resource can have multiple representations</li>
                            <ul>
                                <li>XML, HTML, JSON, YAML, RDF, ...</li>
        					    <li>should conform to Internet Media Types</li>
                            </ul>
                        </ul>
                        <li>Data format</li>
                        <ul>
                            <li>Format of resource data</li>
            				<li>Binary format</li>
        					<ul>
        						<li>specific data structures</li>
        						<li>pointers, numeric values, compressed, etc.</li>
        					</ul>
        					<li>Textual format</li>
        					<ul>
        						<li>in a defined encoding as a sequence of characters</li>
        						<li>HTML, XML-based formats are textual</li>
        					</ul>
                        </ul>
                    </ul>
    			</div>
                
    			<div class="slide">
    				<hgroup>
    					<h1>Metadata</h1>
    				</hgroup>
    				<ul class="x-small">
                        <li>Metadata ~ self-description</li>
                        <ul>
                            <li>Data about the resource</li>
                            <li>e.g., data format, representation, date the resource was created, ...</li>
                            <li class="space-before no-bullet">1. Defined by HTTP response headers</li>
                            <li class="no-bullet">2. Can be part of the data format</li>
                            <ul>
                                <li>AtomPub protocol such as <code>author</code>, <code>updated</code>, ...</li>
                                <li>HTML <code>http-equiv</code> meta tags</li>
                            </ul>
                        </ul>
                        <li>Resource anatomy</li>
                        <div class="h-drawing" style="height: 220px" id="1AYsQub6fAGV4Z_R2BdIm4JPmoqtamueF9ABNoyPKyJ4"></div>
    				</ul>				
    			</div>
                
        		<div class="slide">
    				<hgroup>
    					<h1>Content-Type Metadata</h1>
    				</hgroup>
    				<ul class="x-small">
    					<li>Access</li>
    					<ul>
    						<li>to be retrieved (GET)</li>
    						<li>to be inserted or updated (PUT, POST)</li>
    						<li>to be deleted (DELETE)</li>
    					</ul>
                        <li>Request</li>
                        <ul>
                            <li>HTTP header <code>Accept</code>, part of content negotiation protocol</li>
                        </ul>
                        <li>Response</li>
                        <ul>
                            <li>HTTP header <code>Content-Type: type/subtype; parameters</code></li>
                            <li>Specifies an <span id="rfc-2045" class="h-ref">Internet 
                                Media Type</span> of the resource representation.</li>
                            <ul>
            					<li>IANA (Internet Assigned Numbers Authority) 
        						  manages a <span id="iana-media-types" class="h-ref">registry of media types</span> and character encodings</li>
        						<li>subtypes of <code>text</code> type have an optional charset parameter<br/>
        						<code>text/html; charset=iso-8859-1</code></li>                        
                            </ul>
                            <li>A resource may provide more than one representations</li>
                            <ul>
                                <li>promotes services' loose coupling</li>
                            </ul>
                        </ul>
    				</ul>
    			</div> 
    
    			<div class="slide">
    				<hgroup>
    					<h1>Major Media Types</h1>
    				</hgroup>
    				<ul class="small">
    					<li>Common Standard Media Types</li>
    					<ul>
    						<li><code>text/plain</code></li>
                            <ul>
    							<li>natural text in no formal structures</li>
                            </ul>
    						<li><code>text/html</code></li>
                            <ul>
    							<li>natural text embedded in HTML format</li>
                            </ul>
    						<li><code>application/xml</code>, <code>application/json</code></li>
                            <ul>
        						<li>XML-based/JSON-based, application specific format</li>
                            </ul>
    						<li><code>application/wsdl+xml</code></li>
                            <ul>
        						<li><code>+xml</code> suffix to indicate a specific format</li>
                            </ul>
    					</ul>
    					<li>Non-standard media types</li>
    					<ul>
    						<li>Types or subtypes that begin with <code>x-</code> are not in IANA<br/>
                            <code>application/x-latex</code></li>
        					<li>subtypes that begin with <code>vnd.</code> are vendor-specific<br/>
        					<code>application/vnd.ms-excel</code></li>
    					</ul>
    				</ul>
    			</div>             
           
            	<div class="slide">
    				<hgroup>
    					<h1>Resource State</h1>
    				</hgroup>
                    <ul class="x-small">
                        <li>State</li>
                        <ul>
                            <li>Resource representation is in fact a <b>representation of a resource state</b></li>
                            <li>Resource may be in different states over time</li>
                        </ul>
                    </ul>
    				<div class="h-drawing" style="height: 250px; margin: 15px 0px 15px 0px;" 
    					id="1dhjNo4p6x5rS-IH3E2WcVw3TxwCqmdhtA-9wD0hwbuc"></div>
                    <ul class="small space-before">
                        <li>In REST resource states represent application states</li>                    
                    </ul>
    			</div>           
                
                <div class="slide" id="resource-state">
    				<hgroup>
    					<h1>Resource State Example</h1>
    				</hgroup>
                    <ul class="x-small">
                        <li>Time <code>t1</code>: client A retrieves a resource <code>/orders</code> (GET)</li>
                        <pre class="brush: xml; class-name: 'tight'">
                            &lt;orders>
                                &lt;order id="54467"/>
                                &lt;order id="65432"/>
                            &lt;/orders>                                                
                        </pre>
                        <li>Time <code>t2</code>: client B adds a new order (POST)</li>
                        <pre class="brush: xml; class-name: 'tight'">
                            &lt;order>
                                ...
                            &lt;/order>                                                
                        </pre>
                        <li>Time <code>t3</code>: client A retrieves a resource <code>/orders</code> (GET)</li>
                        <pre class="brush: xml; class-name: 'tight'">
                            &lt;orders>
                                &lt;order id="54467"/>
                                &lt;order id="65432"/>
                                &lt;order id="74567"/>
                            &lt;/orders>                                                
                        </pre>
                        <li>The resource <code>/orders</code> has different states in <code>t1</code>
                        and <code>t3</code>.
                    </ul>
    			</div>           
                    
            </section>
            
        </section>

        <div class="slide outline"></div>

        <section>
            <header>HATEOAS</header>
            
            <div class="slide">
                <hgroup>
                    <h1>HATEOAS</h1>
                </hgroup>
                <ul>
                    <li>HATEOAS = Hypertext as the Engine for Application State</li>
                    <ul>
                        <li>The REST core principle</li> 
                        <li><b>Hypertext</b></li>
                        <ul>
                            <li>Hypertext is a representation of a resource with <b>links</b></li>
                            <li>A link is an URI of a resource</li>
                            <li>Applying an access to a resource via its link = state transition</li>
                        </ul>
                    </ul>
                    <li>Statelessness</li>
                    <ul>
                        <li>A service does not use a memory to remember a state</li>
                        <li>HATEOAS enables stateless implementation of services</li>
                    </ul>
                </ul>
            </div>

            <div class="slide outline"></div>
            
            <section>
                <header>Stateful vs. Stateless</header>
            
                <div class="slide">
                    <hgroup>
                        <h1>Stateful server</h1>
                    </hgroup>
                    <ul class="x-small">
                        <li>Sessions to store the application state</li>
                        <ul>
                            <li>Recall HTTP state management in MDW</li>
                            <li>The app uses a server memory to remember the state</li>
                            <li>When the server restarts, the app state is lost</li>
                        </ul>
                    </ul>
                    <div class="h-drawing" style="height: 350px" 
                        id="1CcGvRSm-RMa00XbHLlk2YhU8Wqz9Bl7nuWrynaFG3Sk"></div>                    
                </div>
    
                <div class="slide">
                    <hgroup>
                        <h1>Stateless server</h1>
                    </hgroup>
                    <ul class="x-small">
                        <li>HTTP and hypermedia to transfer the app state</li>
                        <ul>
                            <li>Does not use a server memory to remember the app state</li>
                            <li>State transferred between a client and a service via HTTP metadata and resources' representations</li>
                        </ul>
                    </ul>
                    <div class="h-drawing" style="height: 350px" 
                        id="1ZZsczsf7O-4HLuf_Flk0Ruttv5buKRmM7afQvgGWK8w"></div>                    
                </div>

                <div class="slide">
                    <hgroup>
                        <h1>Persistent Storage and Session Memory</h1>
                    </hgroup>
                    <ul class="small">
                        <li>Persistent Storage</li>
                        <ul>
                            <li>Contains the app data</li>
                            <li>Data is serialized into resource representation formats</li>
                            <li>All sessions may access the data via resource IDs</li>
                        </ul>
                        <li>Session Memory</li>
                        <ul>
                            <li>Server memory that contains a state of the app</li>
                            <li>A session may only access its session memory</li>
                            <li>Access through cookies</li>
                            <li>Note</li>
                            <ul>
                                <li>A session memory may be implemented via a persistent storage (such as in Google AppEngine)</li>
                            </ul>
                        </ul>
                    </ul>
                </div>
            </section>
            
            <div class="slide outline"></div>
            
            <section> 
                <header>Links and Preconditions</header>
                
                <div class="slide">
                    <hgroup>
                        <h1>Link</h1>
                    </hgroup>
                    <ul class="small">
                        <li>Service operation</li>
                        <ul>
                            <li>Applying an access to a link (GET, PUT, POST, DELETE)</li>
                            <li>Link: HTTP method + resource URI + optional link semantics</li>
                        </ul>
                        <li>Example: <code>getOrder</code>, <code>addOrder</code>, and <code>updateItem</code></li>
                    </ul>
                    <div class="h-drawing" id="16vcb0AGdT3N5Jd4FFw9YADqYoF_QQlP46UsYngjfTKs"
                        style="height: 320px"></div>
                </div>          

                <div class="slide">
                    <hgroup>
                        <h1>Atom Links</h1>
                    </hgroup>
                    <ul class="small">
                        <li>Atom Syndication Format</li>
                        <ul>
                            <li>XML-based document format; Atom feeds</li>
                            <li>Atom links becoming popular for RESTful applications</li>
                            <pre class="brush: xml; highlight : [2,3,4,5]">
                            &lt;order a:xmlns="http://www.w3.org/2005/Atom" xmlns="..."&gt;
                                &lt;a:link 
                                    rel="next" 
                                    href="http://company.com/orders/5543" 
                                    type="application/xml"/>
                                &lt;customer&gt;Tomas&lt;/customer>
                                &lt;items&gt;...&lt;/items>
                            &lt;/order>
                            </pre>
                            <li>Link structure</li>
                            <ul class="no-bullet">
                                <li><code>rel</code> &ndash; name of the link<br/> 
                                ~ semantics of an operation behind the link</li>
                                <li><code>href</code> &ndash; URI to the resource described by the link</li>
                                <li><code>type</code> &ndash; media type of the resource the link points to</li>
                            </ul>
                        </ul>
                    </ul>
                </div>          

                <div class="slide">
                    <hgroup>
                        <h1>Link Semantics</h1>
                    </hgroup>
                    <ul class="small">
                        <li>Standard <code>rel</code> values</li>
                        <ul>
                            <li>Navigation: <code>next</code>, <code>previous</code>, <code>self</code></li>
                            <li>Does not reflect a HTTP method you can use</li>
                        </ul>
                        <li>Extension <code>rel</code> values</li>
                        <ul>
                            <li>You can use <code>rel</code> to indicate a semantics of an operation</li>
                            <li>Example: add item, delete order, update order, etc.</li>
                            <li>A client associates this semantics with an operation it may apply at a particular state</li>
                            <li>The semantics should be defined by using an URI</li>
                            <pre class="brush: xml;">
                            &lt;order a:xmlns="http://www.w3.org/2005/Atom" xmlns="..."&gt;
                                &lt;id>2324&lt;/id>
                                &lt;a:link rel="http://company.com/op/addItem" 
                                    href="http://company.com/orders/2324"/>
                                &lt;a:link rel="http://company.com/op/deleteOrder" 
                                    href="http://company.com/orders/2324"/>
                            &lt;/order>
                            </pre>                            
                        </ul>
                    </ul>
                </div>          

                <div class="slide">
                    <hgroup>
                        <h1>Link Headers</h1>
                    </hgroup>
                    <ul class="small">
                        <li>An alternative to Atom links in resource representations</li>
                        <ul>
                            <li>links defined in HTTP Link header, <span class="h-ref" id="rfc-5988">Web Linking IETF spec</a></li>
                            <li>They have the same semantics as Atom Links</li>
                            <li>Example:</li>
                            <pre class="brush: plain; gutter: 'false'">
                                &gt; HEAD /orders HTTP/1.1
                                
                                &lt; Content-Type: application/xml
                                &lt; Link: &lt;http://company.com/orders/?page=2&amp;size=10&gt;; rel="next"
                                &lt; Link: &lt;http://company.com/orders/?page=10&amp;size=10&gt;; rel="last"
                            </pre>
                        </ul>
                        <li>Advantages</li>
                        <ul>
                            <li>no need to get the entire document</li>
                            <li>no need to parse the document to retrieve links</li>
                            <li>use HTTP HEAD only</li>
                        </ul>                       
                    </ul>
                </div>          
            </section>
            
            <div class="slide">
                <hgroup>
                    <h1>Preconditions and HATEOAS</li>
                </hgroup>
                <ul class="x-small">
                    <li>Preconditions in HATEOAS</li>
                    <ul>
                        <li>Service in a current state generates only valid transitions 
                        that it includes in the representation of the resource.</li>
                        <li>Transition logic is realized at the server-side</li>
                    </ul>
                </ul>
                <div class="h-drawing" style="height: 230px" 
                    id="1H_GfN8C1DZObNC_9HcRLa6Nk-EuJUEr0h6-65HhHs0U"></div>
            </div>                

            <div class="slide">
                <hgroup>
                    <h1>Advantages</h1>
                </hgroup>
                <ul class="x-small">
                    <li>Location transparency</li>
                    <ul>
                        <li>only "entry-level" links published to the World</li>
                        <li>other links within documents can change without changing client's logic</li>
                        <li>Hypertext represents the current user's view, i.e. rights or other context</li>                        
                    </ul>
                    <li>Loose coupling</li>
                    <ul>
                        <li>no need for a logic to construct the links</li>
                        <li>Clients know to which states they can move via links</li>
                    </ul>
                    <li>Statelessness and Cloud</li>
                    <ul>
                        <li>Better implementation of scalability</li>
                    </ul>
                </ul>
            </div>          

        </section>


    </body>
</html>
